<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      api - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  
  <link type="text/css" rel="stylesheet" href="styles/collapse.css">
  

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      Democracy
    </h3>

    

    <h3>Classes</h3><ul><li id="BuildsManager-nav"><a href="bm.BuildsManager.html">BuildsManager</a></li><li id="ContractsManager-nav"><a href="cm.ContractsManager.html">ContractsManager</a><ul class='methods'><li data-type="method" id="ContractsManager-getContract-nav"><a href="cm.ContractsManager.html#getContract">getContract</a></li></ul></li><li id="Contract-nav"><a href="contract.Contract.html">Contract</a></li><li id="Compiler-nav"><a href="module-compile.Compiler.html">Compiler</a></li></ul><h3>Modules</h3><ul><li id="api-nav"><a href="module-api.html">api</a><ul class='methods'><li data-type="method" id="api-init-nav"><a href="module-api.html#.init">init</a></li><li data-type="method" id="api-initFS-nav"><a href="module-api.html#.initFS">initFS</a></li><li data-type="method" id="api-prepareCachedWallet-nav"><a href="module-api.html#.prepareCachedWallet">prepareCachedWallet</a></li><li data-type="method" id="api-prepareErasePassword-nav"><a href="module-api.html#.prepareErasePassword">prepareErasePassword</a></li><li data-type="method" id="api-prepareUpdateWhileCached-nav"><a href="module-api.html#.prepareUpdateWhileCached">prepareUpdateWhileCached</a></li><li data-type="method" id="api-relockErasePassword-nav"><a href="module-api.html#.relockErasePassword">relockErasePassword</a></li></ul></li><li id="compile-nav"><a href="module-compile.html">compile</a><ul class='methods'><li data-type="method" id="compile-compile-nav"><a href="module-compile.html#.compile">compile</a></li><li data-type="method" id="compile-updateFlatten-nav"><a href="module-compile.html#.updateFlatten">updateFlatten</a></li></ul></li><li id="contract-nav"><a href="module-contract.html">contract</a><ul class='methods'><li data-type="method" id="contract-createContract-nav"><a href="module-contract.html#.createContract">createContract</a></li><li data-type="method" id="contract-getInstance-nav"><a href="module-contract.html#.getInstance">getInstance</a></li><li data-type="method" id="contract-init-nav"><a href="module-contract.html#.init">init</a></li></ul></li><li id="utils-nav"><a href="module-utils.html">utils</a><ul class='methods'><li data-type="method" id="utils-getConfig-nav"><a href="module-utils.html#.getConfig">getConfig</a></li><li data-type="method" id="utils-parseLogLevels-nav"><a href="module-utils.html#.parseLogLevels">parseLogLevels</a></li><li data-type="method" id="utils-textsEqual-nav"><a href="module-utils.html#.textsEqual">textsEqual</a></li></ul></li><li id="wallet-nav"><a href="module-wallet.html">wallet</a><ul class='methods'><li data-type="method" id="wallet-createEncryptedAccount-nav"><a href="module-wallet.html#.createEncryptedAccount">createEncryptedAccount</a></li><li data-type="method" id="wallet-createSignerEth-nav"><a href="module-wallet.html#.createSignerEth">createSignerEth</a></li><li data-type="method" id="wallet-init-nav"><a href="module-wallet.html#.init">init</a></li><li data-type="method" id="wallet-loadEncryptedAccount-nav"><a href="module-wallet.html#.loadEncryptedAccount">loadEncryptedAccount</a></li><li data-type="method" id="wallet-pay-nav"><a href="module-wallet.html#.pay">pay</a></li><li data-type="method" id="wallet-payTest-nav"><a href="module-wallet.html#.payTest">payTest</a></li><li data-type="method" id="wallet-prepareSignerEth-nav"><a href="module-wallet.html#.prepareSignerEth">prepareSignerEth</a></li><li data-type="method" id="wallet-saveEncryptedAccount-nav"><a href="module-wallet.html#.saveEncryptedAccount">saveEncryptedAccount</a></li><li data-type="method" id="wallet-unlockEncryptedAccount-nav"><a href="module-wallet.html#.unlockEncryptedAccount">unlockEncryptedAccount</a></li></ul></li></ul><h3 id="global-nav">Global</h3><ul><li><a href="global.html#getFileKeySpace">getFileKeySpace</a></li><li><a href="global.html#path">path</a></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        api
      </h1>
    

    

<section>
  <header>
    
      
        
  </header>

  <article>
    <div class="container-overview">
      
        
          <div class="description">
            <p>The main Democracy Web API exported as part of demo-webify webpack'd bundle.
Include BrowserFS for backing the file-based Democracy immutable keystore,
sending file-based HTTP REST requests, and managing the in-browser wallet.</p>
<p>Call api.init() in your page code when the page has finished loading.
Afterwards, you usually want to call the following (in order)
api.prepareCachedWallet() to load cached Ethereum address / password in localStorage
api.prepareErasePassword() to set up timeout functions to erase the password
api.prepareUpdateWhileCached() to set up interval functions while password is still cached.</p>
          </div>
        

        
          













<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="webify_exports_api.js.html">webify/exports/api.js</a>, <a href="webify_exports_api.js.html#line1">line 1</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














        
      
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            

<h4 class="name" id=".utils">
  <span class="type-signature">(static) </span>utils<span class="type-signature"></span>
</h4>







<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="webify_exports_api.js.html">webify/exports/api.js</a>, <a href="webify_exports_api.js.html#line59">line 59</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>






          
        
    

    
      <h3 class="subsection-title">Methods</h3>

      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#.init">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id=".init">
      <span class="type-signature">(static) </span>init<span class="signature">(unlockSeconds)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    <p>Initialize and populate one-time members of the API</p>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>unlockSeconds</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Number
    </span>

    


          
        </td>

        

        

        <td class="description last">
          <p>default number of seconds to leave wallet
unlocked in memory, before the next refresh.</p>
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="webify_exports_api.js.html">webify/exports/api.js</a>, <a href="webify_exports_api.js.html#line88">line 88</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#.initFS">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id=".initFS">
      <span class="type-signature">(static) </span>initFS<span class="signature">(listingHTTP)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    <p>Initialize the BrowserFS filesystem with the given file listing as an Object of
path to null. Each of these paths will be pre-pended with '/api' to match the
Democracy REST server.</p>
<p>Example:
api.initFS({ 'notes/abc': null })</p>
<p>will map writes of the form fs.writeFileSync('notes/abc') to
a POST request to http://{db_host}:{db_port}/api/notes/abc</p>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>listingHTTP</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Object
    </span>

    


          
        </td>

        

        

        <td class="description last">
          <p>paths to map to REST calls.</p>
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="webify_exports_api.js.html">webify/exports/api.js</a>, <a href="webify_exports_api.js.html#line20">line 20</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#.prepareCachedWallet">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id=".prepareCachedWallet">
      <span class="type-signature">(static) </span>prepareCachedWallet<span class="signature">(enteredPassword)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    <p>Prepare, and if necessary, create and/or load, the Ethereum wallet (address/password)
combo for this browser.
Call if you need to initially unlock the wallet, or to unlock again
after it has been automatically relocked, but you don't need to run api.init().
If the current address and password combo are not valid,
create a new one and save into localStorage.
Warns user to write down the password.</p>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>enteredPassword</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      String
    </span>

    


          
        </td>

        

        

        <td class="description last">
          <p>password to unlock api.thisAddress if desired</p>
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="webify_exports_api.js.html">webify/exports/api.js</a>, <a href="webify_exports_api.js.html#line104">line 104</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#.prepareErasePassword">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id=".prepareErasePassword">
      <span class="type-signature">(static) </span>prepareErasePassword<span class="signature">(erasePasswordSeconds, erasePasswordCallback)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    <p>Prepare timeout function to erase the password for this wallet
in the given number of seconds.
The erasePasswordTime is cached, but the callback function must be manually
registered with this function after every refresh.</p>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>erasePasswordSeconds</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Number
    </span>

    


          
        </td>

        

        

        <td class="description last">
          <p>optional
number of seconds to keep password cached, across all page refreshes.
if missing, use the previously cached erasePasswordTime</p>
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>erasePasswordCallback</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      function
    </span>

    


          
        </td>

        

        

        <td class="description last">
          <p>Optional, function to call when removing password.</p>
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="webify_exports_api.js.html">webify/exports/api.js</a>, <a href="webify_exports_api.js.html#line179">line 179</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#.prepareUpdateWhileCached">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id=".prepareUpdateWhileCached">
      <span class="type-signature">(static) </span>prepareUpdateWhileCached<span class="signature">(updateSeconds, updateCallback)</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    <p>Prepare interval function to update some status as long as password has not been erased.
The updateWhileCachedCallback must be registered after every refresh,
it is not cached.</p>
  </div>







  <h5>Parameters:</h5>
  

<table class="params">
  <thead>
    <tr>
      
        <th>Name</th>
      

      <th>Type</th>

      

      

      <th class="last">Description</th>
    </tr>
  </thead>

  <tbody>
    
      <tr>
        
          <td class="name"><code>updateSeconds</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      Number
    </span>

    


          
        </td>

        

        

        <td class="description last">
          <p>defaults to 1. Number of seconds to wait between updates.</p>
          
        </td>
      </tr>

    
      <tr>
        
          <td class="name"><code>updateCallback</code></td>
        

        <td class="type">
          
            
    <span class="param-type">
      function
    </span>

    


          
        </td>

        

        

        <td class="description last">
          <p>Optional, callback function which is given the
number of seconds left before password is erased.</p>
          
        </td>
      </tr>

    
  </tbody>
</table>





<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="webify_exports_api.js.html">webify/exports/api.js</a>, <a href="webify_exports_api.js.html#line230">line 230</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
        


  

  <span class='name-container'>
    <a class="link-icon" href="#.relockErasePassword">
      <svg height="20" width="20" style="fill: black;">
        <use xlink:href="#linkIcon"></use>
      </svg>
    </a>
    <h4 class="name" id=".relockErasePassword">
      <span class="type-signature">(static) </span>relockErasePassword<span class="signature">()</span><span class="type-signature"></span>
    </h4>
  </span>

  



  <div class="description">
    <p>Relock all unlocked accounts in the wallet, clear the saved password and
associated timeout/interval IDs and callback functions.
Called primarily within api.prepareErasePassword.</p>
  </div>










<dl class="details">

  

  

  

  

  

  

  

  

  

  

  

  

  
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source">
      <ul class="dummy">
        <li>
          <a href="webify_exports_api.js.html">webify/exports/api.js</a>, <a href="webify_exports_api.js.html#line259">line 259</a>
        </li>
      </ul>
    </dd>
  

  

  

  
</dl>














      
    

    

    
  </article>
</section>




  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  

</body>
</html>